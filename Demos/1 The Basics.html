<!DOCTYPE html>
<html>

	<head>
		<title>1 The Basics - Meteoric Demos</title>
        	<script src="http://code.jquery.com/jquery-1.7.2.min.js" type="text/javascript"></script>
		<script src="../meteoric.js" type="text/javascript"></script>
		<link type="text/css" rel="Stylesheet" href="styles.css" />
	</head>

	<body>

	<h1>1 The Basics</h1>

<p><pre class="code"><span class="comment">// Build an object</span>
var entity = {
	<span class="comment">// Every entity must have a "type" property</span>
	"type": "businessObject",
	"name": "Logon",
	"action": "Logon",
	<span class="comment">// Create, Update, Delete suppport, named actions (JavaScript functions)</span>
	"onCreate": "onCreate",
	"onUpdate": "onUpdate",
	"onDelete": "onDelete",
	<span class="comment">// Each entity has an array of arbitrary field entities. This is the equivalent of properties on an object.</span>
	"fields": [{
		"name": "Username",
		<span class="comment">// Each field entity also needs a type property. A field can contain its own "fields" array for nested objects.</span>
		"type": "string",
		"displayName": "Email/Username",
		"defaultValue": "Guest",
		"maxLength": 32,
		"minLength": 2,
		"isRequired": true,
		<span class="comment">// Entities can contain completely arbitrary properties which will be understood and interpreted later by a "Writer"</span>
		"placeholder": "Enter your username or email address:"
	},
	{
		"name": "Password",
		"type": "password",
		"displayName": "Password",
		"minLength": 8,
		"isRequired": true
	}]
};

<span class="comment">// Create actions</span>
$.meteoric.actions.onCreate = function (event, entity) { 
	alert("Created!"); 
}
$.meteoric.actions.onUpdate = function (event, entity) { 
	alert("Updated!"); 
}
$.meteoric.actions.onDelete = function (event, entity) { 
	if (confirm("Are you sure you want to delete this?")) {
		alert("Deleted!"); 
	} else {
		alert("Delete ABORTED.");
	}
}

<span class="comment">// Now we use a CSS/jQuery selector to select the DIV to build the entity inside.</span>
$("#meteoricCreate").meteoric({ metadata: entity });
$("#meteoricRead").meteoric({ metadata: entity, mode: "read" });
$("#meteoricUpdate").meteoric({ metadata: entity, mode: "update" });
$("#meteoricDelete").meteoric({ metadata: entity, mode: "delete" });

        </pre></p>

        <h2>Output:</h2>

		<div id="meteoricCreate"/>
		<div id="meteoricRead"/>
		<div id="meteoricUpdate"/>
		<div id="meteoricDelete"/>

		<script type="text/javascript">
			var entity = {
				"type": "businessObject",
				"name": "Logon",
				"action": "Logon",
				"onCreate": "onCreate",
				"onUpdate": "onUpdate",
				"onDelete": "onDelete",
				"fields": [{
					"name": "Username",
					"type": "string",
					"displayName": "Email/Username",
					"value": "Guest",
					"maxLength": 32,
					"minLength": 2,
					"isRequired": true,
					"placeholder": "Enter your username or email address:"
				},
				{
					"name": "Password",
					"type": "password",
					"displayName": "Password",
					"minLength": 8,
					"isRequired": true
				}]
			};

		// Create actions
		$.meteoric.actions.onCreate = function (event, entity) { 
			alert("Created!"); 
		}
		$.meteoric.actions.onUpdate = function (event, entity) { 
			alert("Updated!"); 
		}
		$.meteoric.actions.onDelete = function (event, entity) { 
			if (confirm("Are you sure you want to delete this?")) {
				alert("Deleted!"); 
			} else {
				alert("Delete ABORTED.");
			}
		}

		$("#meteoricCreate").meteoric({ metadata: entity });
		$("#meteoricRead").meteoric({ metadata: entity, mode: "read" });
		$("#meteoricUpdate").meteoric({ metadata: entity, mode: "update" });
		$("#meteoricDelete").meteoric({ metadata: entity, mode: "delete" });
		</script>
	</body>
</html>